# qm -> qy 红单功能接口改造 - 阶段性汇报

**汇报对象：** PD Fly  
**汇报人：** trump

---

## 一、当前完成情况 ✅

**后端接口改造已完成：**
- ✅ 定时任务已配置完成，数据正常生成
- ✅ 后台管理已支持 qy 产品，可正常查看数据
- ✅ **大部分接口已支持多产品**（18个App接口 + 7个对外接口）
- ✅ 数据已按 `product` 字段隔离（qm 和 qy 数据互不影响）

**结论：后端接口层面已基本完成，可以支持前端接入。**

---

## 二、剩余工作及推动方式 🎯

### 2.1 前端接入工作（需要产品推动）

**工作内容：**
- 前端需要将现有 qm 产品的接口调用复制一份，改为传递 `product='qy'` 参数
- 大部分接口无需修改，只需改参数即可

**推动方式：**
- 需要产品协调前端开发，逐个接口进行联调测试
- 后端提供技术支持，配合联调

### 2.2 个别接口需要针对性改造（需反馈后处理）

**问题类型：**
- 部分接口可能存在硬编码 `product='qm'` 的情况
- 朋友圈相关接口需要特殊处理（已修复部分，但可能还有其他问题）

**处理方式：**
- ⚠️ **必须由前端/产品/运营反馈具体问题后，后端再针对性修复**
- 后端不会主动排查和修改，避免误改正常接口导致线上事故

**占比：** 这部分问题占比不高，预计 < 10%

---

## 三、风险说明 ⚠️

1. **接口改造风险**
   - 部分接口可能存在硬编码问题，需要实际使用中发现问题
   - 后端无法100%保证所有接口都已完美支持，需要实际测试验证

2. **数据隔离风险**
   - 虽然已按 `product` 字段隔离，但需要实际使用中验证数据是否正确隔离

3. **建议**
   - 建议先在测试环境充分测试，再上生产
   - 建议分批次上线，先上线核心功能，再逐步扩展

---

## 四、推动建议和节奏 📅

### 阶段一：前端接入（建议1-2周）
1. 产品协调前端，将 qm 接口复制为 qy 接口（改参数）
2. 在测试环境进行基础功能测试
3. 发现问题及时反馈给后端

### 阶段二：问题修复（根据反馈）
1. 后端根据反馈的问题，针对性修复
2. 修复后重新测试验证
3. 循环迭代，直到问题解决

### 阶段三：上线（建议分批次）
1. 第一批：核心功能（如查看红单列表、详情等）
2. 第二批：交互功能（如购买、发布等）
3. 第三批：其他功能

---

## 五、总结

**后端工作：** 接口改造已基本完成，可以支持前端接入  
**前端工作：** 需要产品推动，复制接口调用并改参数  
**风险控制：** 需要实际测试中发现和解决问题，无法提前100%保证  
**配合方式：** 后端随时配合，但需要具体问题反馈后再处理

---

**备注：** 如有具体接口问题，请提供接口路径、请求参数、错误信息，我会及时处理。
