# VS Code 调试模式使用指南（支持热更新）

## 已完成的配置

✅ Tomcat 8.5.100 已安装到 `C:\apache-tomcat-8.5.100`
✅ 项目已编译
✅ 项目已部署到 Tomcat
✅ VS Code 调试环境已配置
✅ 热更新（Hot Swap）已启用

## 如何启动调试模式

### 方法1：使用 F5 快捷键
1. 在 VS Code 中打开项目
2. 直接按 `F5` 键
3. 等待 Tomcat 启动（约 10-15 秒）
4. 浏览器访问：`http://localhost:8080/CODE/`

### 方法2：使用调试面板
1. 点击 VS Code 左侧的 "运行和调试" 图标（▶️）
2. 在下拉列表中选择 "Debug Tomcat (Hot Swap)"
3. 点击绿色播放按钮
4. 等待 Tomcat 启动
5. 浏览器访问：`http://localhost:8080/CODE/`

## 热更新功能

### 支持自动更新的修改（保存即生效）
✅ **方法体内的代码修改**
   - 修改业务逻辑
   - 修改变量赋值
   - 修改条件判断
   - 刷新浏览器即可看到效果

✅ **方法内的变量修改**
   - 添加/删除局部变量
   - 修改变量值

### 需要重启调试会话的修改
⚠️ **类结构修改**
   - 新增方法
   - 删除方法
   - 修改方法签名（参数、返回值）
   - 新增/删除类字段

⚠️ **配置文件修改**
   - XML 配置文件
   - Properties 文件
   - Struts 配置

**重启方法**：
- 按 `Ctrl+Shift+F5` 重启调试
- 或点击调试工具栏的 "重启" 按钮（🔄）

## 断点调试

### 设置断点
1. 在代码行号左侧点击，出现红点即为断点
2. 或将光标移到某行，按 `F9` 设置断点

### 调试操作
- `F5` - 继续执行
- `F10` - 单步跳过（Step Over）
- `F11` - 单步进入（Step Into）
- `Shift+F11` - 跳出（Step Out）
- `Shift+F5` - 停止调试

### 查看变量
- 鼠标悬停在变量上查看值
- 左侧 "变量" 面板查看所有局部变量
- "监视" 面板添加表达式监视

## 停止调试

- 按 `Shift+F5`
- 或点击调试工具栏的红色停止按钮（■）

## 常见问题

### Q: 修改代码后没有生效？
A: 检查是否是热更新不支持的修改类型，尝试重启调试会话（Ctrl+Shift+F5）

### Q: Tomcat 启动失败？
A: 检查 8080 端口是否被占用：
```bash
netstat -ano | findstr :8080
```

### Q: 找不到类或资源？
A: 运行构建任务：
- 按 `Ctrl+Shift+B`
- 或点击 "终端" → "运行任务" → "build-project"

### Q: 想重新完整部署？
A: 运行部署脚本：
- 双击 `deploy_to_tomcat.bat`
- 或在 VS Code 中运行任务 "deploy-to-tomcat"

##重要提示

1. **首次启动较慢**：Tomcat 需要初始化，第一次启动约 15-20 秒
2. **保存即编译**：VS Code 会自动编译保存的 Java 文件
3. **配置文件需手动复制**：修改 XML 等配置文件后，需运行构建任务或重启调试
4. **端口冲突**：确保 8080 端口未被占用

## 快速参考

| 操作 | 快捷键 |
|------|--------|
| 启动调试 | F5 |
| 停止调试 | Shift+F5 |
| 重启调试 | Ctrl+Shift+F5 |
| 设置断点 | F9 |
| 单步跳过 | F10 |
| 单步进入 | F11 |
| 构建项目 | Ctrl+Shift+B |

---

**享受热更新开发吧！** 🚀
